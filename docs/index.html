<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="GreenRetrieval - AI-powered plant disease diagnosis using EPPO database and Groq LLM with retrieval-augmented generation"
    />
    <meta
      name="keywords"
      content="plant disease, AI diagnosis, EPPO, RAG, phytopathology"
    />
    <title>GreenRetrieval Pipeline Flow</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          "Space Grotesk",
          "Space Mono",
          -apple-system,
          BlinkMacSystemFont,
          "Arial Black",
          sans-serif;
        background: #0a0a0a;
        color: #ffffff;
        padding: 20px;
        min-height: 100vh;
        line-height: 1.5;
        font-weight: 600;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        padding: 50px 30px;
        background: #10b981;
        border: 6px solid #000000;
        box-shadow: 12px 12px 0 #000000;
        margin-bottom: 50px;
        position: relative;
        transform: rotate(-1deg);
      }

      header::before {
        content: "";
        position: absolute;
        top: -6px;
        left: -6px;
        right: -6px;
        bottom: -6px;
        background: #fbbf24;
        z-index: -1;
        transform: rotate(2deg);
      }

      h1 {
        font-size: 3.5em;
        margin-bottom: 15px;
        color: #000000;
        text-transform: uppercase;
        font-weight: 900;
        letter-spacing: -2px;
        line-height: 1.1;
        transform: rotate(1deg);
      }

      .subtitle {
        font-size: 1.3em;
        color: #000000;
        margin-bottom: 25px;
        font-weight: 700;
        transform: rotate(-0.5deg);
      }

      .badges {
        display: flex;
        justify-content: center;
        gap: 15px;
        flex-wrap: wrap;
        margin-top: 25px;
      }

      .badge {
        background: #ffffff;
        color: #000000;
        padding: 8px 18px;
        border: 4px solid #000000;
        font-size: 0.9em;
        font-weight: 800;
        text-transform: uppercase;
        box-shadow: 4px 4px 0 #000000;
        transform: rotate(-2deg);
      }

      .badge:nth-child(even) {
        transform: rotate(2deg);
      }

      .nav {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 50px;
        flex-wrap: wrap;
      }

      .nav-link {
        padding: 16px 32px;
        background: #fbbf24;
        border: 5px solid #000000;
        color: #000000;
        text-decoration: none;
        font-weight: 800;
        font-size: 1.1em;
        text-transform: uppercase;
        box-shadow: 6px 6px 0 #000000;
        transition: all 0.1s ease;
        position: relative;
      }

      .nav-link:hover {
        transform: translate(3px, 3px);
        box-shadow: 3px 3px 0 #000000;
      }

      .nav-link:active {
        transform: translate(6px, 6px);
        box-shadow: 0 0 0 #000000;
      }

      .flow {
        display: flex;
        flex-direction: column;
        gap: 35px;
      }

      .stage {
        display: flex;
        align-items: stretch;
        gap: 25px;
      }

      .stage-number {
        min-width: 70px;
        height: 70px;
        background: #f472b6;
        color: #000000;
        border: 5px solid #000000;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 900;
        font-size: 2em;
        box-shadow: 6px 6px 0 #000000;
        flex-shrink: 0;
        transform: rotate(-5deg);
      }

      .stage-content {
        flex: 1;
        background: #ffffff;
        color: #000000;
        border: 5px solid #000000;
        padding: 28px;
        box-shadow: 8px 8px 0 #000000;
        position: relative;
        transform: rotate(0.5deg);
      }

      .stage-content::before {
        content: "";
        position: absolute;
        top: 10px;
        left: 10px;
        right: 10px;
        bottom: 10px;
        border: 2px dashed #000000;
        opacity: 0.2;
        pointer-events: none;
      }

      .stage-title {
        font-size: 1.6em;
        font-weight: 900;
        color: #000000;
        margin-bottom: 15px;
        display: flex;
        align-items: center;
        gap: 12px;
        text-transform: uppercase;
        letter-spacing: -0.5px;
      }

      .stage-desc {
        color: #1f2937;
        line-height: 1.7;
        font-size: 1em;
        font-weight: 600;
      }

      .code-tag {
        background: #fbbf24;
        padding: 4px 10px;
        border: 3px solid #000000;
        font-family: "Courier New", monospace;
        font-size: 0.9em;
        color: #000000;
        font-weight: 800;
        white-space: nowrap;
        box-shadow: 2px 2px 0 #000000;
      }

      .decision {
        display: flex;
        justify-content: center;
        margin: 25px 0;
      }

      .decision-box {
        background: #fbbf24;
        border: 5px solid #000000;
        padding: 20px 45px;
        font-weight: 900;
        color: #000000;
        font-size: 1.3em;
        text-transform: uppercase;
        box-shadow: 8px 8px 0 #000000;
        transform: rotate(-2deg);
        letter-spacing: 1px;
      }

      .branches {
        display: flex;
        gap: 25px;
        margin: 25px 0;
      }

      .branch {
        flex: 1;
        padding: 25px;
        border: 5px solid #000000;
        text-align: center;
        box-shadow: 6px 6px 0 #000000;
        font-weight: 700;
      }

      .branch-yes {
        background: #10b981;
        transform: rotate(-1deg);
      }

      .branch-no {
        background: #ef4444;
        transform: rotate(1deg);
      }

      .branch-label {
        font-weight: 900;
        margin-bottom: 15px;
        font-size: 1.4em;
        color: #000000;
        text-transform: uppercase;
      }

      .branch-desc {
        color: #000000;
        font-weight: 700;
        font-size: 1.05em;
      }

      .refuse-box {
        background: #000000;
        color: #ffffff;
        border: 4px solid #ef4444;
        padding: 18px;
        font-weight: 800;
        box-shadow: 4px 4px 0 #ef4444;
        text-transform: uppercase;
      }

      .success-box {
        background: #10b981;
        border: 6px solid #000000;
        padding: 35px;
        color: #000000;
        text-align: center;
        font-size: 1.6em;
        font-weight: 900;
        margin: 35px 0;
        box-shadow: 10px 10px 0 #000000;
        text-transform: uppercase;
        transform: rotate(-1deg);
      }

      .success-box-subtitle {
        font-size: 0.6em;
        margin-top: 15px;
        font-weight: 800;
        color: #000000;
        text-transform: none;
      }

      .connector {
        display: flex;
        justify-content: center;
        margin: 15px 0;
      }

      .arrow {
        width: 6px;
        height: 40px;
        background: #fbbf24;
        border: 3px solid #000000;
        box-shadow: 4px 4px 0 #000000;
        position: relative;
      }

      .arrow::after {
        content: "";
        position: absolute;
        bottom: -18px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 15px solid transparent;
        border-right: 15px solid transparent;
        border-top: 20px solid #fbbf24;
        filter: drop-shadow(4px 4px 0 #000000);
      }

      .icon {
        font-size: 1.4em;
      }

      .stats-box {
        background: #a855f7;
        border: 6px solid #000000;
        padding: 35px;
        margin-top: 50px;
        box-shadow: 10px 10px 0 #000000;
        transform: rotate(1deg);
      }

      .stats-title {
        font-weight: 900;
        color: #000000;
        margin-bottom: 20px;
        font-size: 1.8em;
        text-transform: uppercase;
      }

      .stats-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .stat-item {
        background: #ffffff;
        border: 4px solid #000000;
        padding: 16px;
        font-size: 1em;
        color: #000000;
        font-weight: 800;
        box-shadow: 4px 4px 0 #000000;
        text-transform: uppercase;
        transform: rotate(-1deg);
      }

      .stat-item:nth-child(even) {
        transform: rotate(1deg);
      }

      footer {
        text-align: center;
        padding: 50px 20px 30px;
        color: #ffffff;
        font-size: 1em;
        border-top: 5px solid #fbbf24;
        margin-top: 70px;
        font-weight: 700;
      }

      footer a {
        color: #fbbf24;
        text-decoration: none;
        font-weight: 800;
        border-bottom: 3px solid #fbbf24;
      }

      footer a:hover {
        background: #fbbf24;
        color: #000000;
        padding: 2px 6px;
      }

      .formula-box {
        background: #000000;
        border: 4px solid #fbbf24;
        padding: 18px;
        margin: 18px 0;
        font-family: "Courier New", monospace;
        overflow-x: auto;
        box-shadow: 4px 4px 0 #fbbf24;
      }

      .formula {
        color: #10b981;
        font-size: 1em;
        font-weight: 700;
      }

      @media (max-width: 768px) {
        h1 {
          font-size: 2.5em;
        }

        .stage {
          flex-direction: column;
          align-items: stretch;
        }

        .branches {
          flex-direction: column;
        }

        .stats-list {
          grid-template-columns: 1fr;
        }

        .nav-link {
          font-size: 1em;
          padding: 14px 24px;
        }

        header {
          transform: rotate(0deg);
        }

        .stage-content {
          transform: rotate(0deg);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üåø GreenRetrieval Pipeline</h1>
        <p class="subtitle">
          AI-Powered Plant Disease Diagnosis with EPPO Verification
        </p>
        <div class="badges">
          <span class="badge">RAG Architecture</span>
          <span class="badge">121K EPPO Codes</span>
          <span class="badge">120B LLM</span>
          <span class="badge">Œ∏ ‚â• 0.3</span>
        </div>
      </header>

      <div class="nav">
        <a
          href="https://github.com/Adriz1611/GreenRetrieval"
          class="nav-link"
          target="_blank"
          >üìÇ GitHub</a
        >
        <a
          href="https://colab.research.google.com/github/Adriz1611/GreenRetrieval/blob/main/run_colab.ipynb"
          class="nav-link"
          target="_blank"
          >üìì Colab</a
        >
        <a
          href="https://github.com/Adriz1611/GreenRetrieval#readme"
          class="nav-link"
          target="_blank"
          >üìö Docs</a
        >
      </div>

      <div class="flow">
        <!-- Input -->
        <div class="stage">
          <div class="stage-number">‚ñ∂</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">üì•</span>
              Input: Disease Label
            </div>
            <div class="stage-desc">
              Computer vision model prediction ‚Üí Example:
              <span class="code-tag">"Rice leaf blast"</span>
            </div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Stage 1: Normalize -->
        <div class="stage">
          <div class="stage-number">1</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">üî§</span>
              Normalize Label
            </div>
            <div class="stage-desc">
              Tokenize text ‚Üí Extract components: host
              <span class="code-tag">rice</span>, symptoms
              <span class="code-tag">blast</span>, locations
              <span class="code-tag">leaf</span> <br /><br />Filter generic
              terms like "of, the, and, plant, crop" <br />Preserve location
              keywords for scoring bonus
            </div>
          </div>
        </div>

        <div class="decision">
          <div class="decision-box">Tokens found?</div>
        </div>

        <div class="branches">
          <div class="branch branch-no">
            <div class="branch-label">‚ùå NO</div>
            <div class="refuse-box">REFUSE: No matching record</div>
          </div>
          <div class="branch branch-yes">
            <div class="branch-label">‚úÖ YES</div>
            <div class="branch-desc">Continue to retrieval ‚Üí</div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Stage 2: Retrieve -->
        <div class="stage">
          <div class="stage-number">2</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">üîç</span>
              Retrieve from SQLite
            </div>
            <div class="stage-desc">
              Query <span class="code-tag">eppocodes_all.sqlite</span> (121,370
              active codes) ‚Üí Match by token overlap
              <div class="formula-box">
                <div class="formula">
                  S(c,q) = overlap_ratio + Œ≤h¬∑host(0.2) + Œ≤‚Ñì¬∑location(0.3) +
                  Œ≤d¬∑dtcode(0.15)
                </div>
              </div>
              Rank candidates by composite score ‚Üí Return top 50
            </div>
          </div>
        </div>

        <div class="decision">
          <div class="decision-box">Best score ‚â• 0.30?</div>
        </div>

        <div class="branches">
          <div class="branch branch-no">
            <div class="branch-label">‚ùå NO</div>
            <div class="refuse-box">REFUSE: Confidence too low</div>
          </div>
          <div class="branch branch-yes">
            <div class="branch-label">‚úÖ YES</div>
            <div class="branch-desc">Proceed to API fetch ‚Üí</div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Stage 3: Fetch EPPO -->
        <div class="stage">
          <div class="stage-number">3</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">üåê</span>
              Fetch EPPO Data
            </div>
            <div class="stage-desc">
              Check cache
              <span class="code-tag">.eppo_cache/taxons/{CODE}/</span> ‚Üí Cache
              hit? Load instantly ‚ö° <br /><br />Cache miss ‚Üí API call:
              <span class="code-tag">api.eppo.int/gd/v2/taxons/...</span>
              <br />Fetch: overview, names, hosts ‚Üí Save to JSON cache
              <br /><br />Rate limit: 60 req/10s | Retry: 3 attempts with
              exponential backoff
            </div>
          </div>
        </div>

        <div class="decision">
          <div class="decision-box">Data retrieved?</div>
        </div>

        <div class="branches">
          <div class="branch branch-no">
            <div class="branch-label">‚ùå NO</div>
            <div class="refuse-box">REFUSE: API failure</div>
          </div>
          <div class="branch branch-yes">
            <div class="branch-label">‚úÖ YES</div>
            <div class="branch-desc">Validate facts ‚Üí</div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Stage 4: Validate -->
        <div class="stage">
          <div class="stage-number">4</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">‚úì</span>
              Validate Against Label
            </div>
            <div class="stage-desc">
              Extract all text from EPPO facts (preferred names, common names,
              hosts)
              <br />Tokenize combined text ‚Üí Check semantic overlap
              <div class="formula-box">
                <div class="formula">
                  |Tlabel ‚à© Teppo| ‚â• œÉ = 1 token minimum
                </div>
              </div>
              Ensures retrieved data actually supports the input label
            </div>
          </div>
        </div>

        <div class="decision">
          <div class="decision-box">Validation passed?</div>
        </div>

        <div class="branches">
          <div class="branch branch-no">
            <div class="branch-label">‚ùå NO</div>
            <div class="refuse-box">REFUSE: Data mismatch</div>
          </div>
          <div class="branch branch-yes">
            <div class="branch-label">‚úÖ YES</div>
            <div class="branch-desc">Generate response ‚Üí</div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Stage 5: Generate -->
        <div class="stage">
          <div class="stage-number">5</div>
          <div class="stage-content">
            <div class="stage-title">
              <span class="icon">ü§ñ</span>
              Generate LLM Response
            </div>
            <div class="stage-desc">
              Call Groq API ‚Üí Model:
              <span class="code-tag">openai/gpt-oss-120b</span> (120B
              parameters) <br />Temperature:
              <span class="code-tag">0.3</span> (low randomness) | Max tokens:
              <span class="code-tag">1024</span> <br /><br /><strong
                >Structured 4-section output:</strong
              >
              <br />1Ô∏è‚É£ Confirmation (YES/NO + reasoning) <br />2Ô∏è‚É£ Disease
              Overview (pathogen, symptoms) <br />3Ô∏è‚É£ Treatment Options (methods,
              timing) <br />4Ô∏è‚É£ Prevention Strategies (prioritized)
            </div>
          </div>
        </div>

        <div class="connector"><div class="arrow"></div></div>

        <!-- Success -->
        <div class="success-box">
          ‚úÖ SUCCESS: Verified Diagnosis
          <div class="success-box-subtitle">
            Returns ‚Üí EPPO Code ‚Ä¢ Confidence Score (Œ∏) ‚Ä¢ Full Structured
            Response
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-box">
          <div class="stats-title">üìä Pipeline Statistics</div>
          <div class="stats-list">
            <div class="stat-item">üíØ Total Diagnoses</div>
            <div class="stat-item">‚úÖ Verified Count</div>
            <div class="stat-item">üö´ Refused Count</div>
            <div class="stat-item">üéØ Avg Confidence</div>
            <div class="stat-item">üíæ Cache Hits</div>
            <div class="stat-item">üåê Cache Misses</div>
            <div class="stat-item">üìû API Calls</div>
            <div class="stat-item">ü§ñ LLM Calls</div>
          </div>
        </div>
      </div>

      <footer>
        <p>Built with üå± for reliable agricultural AI</p>
        <p style="margin-top: 12px">
          <a href="https://github.com/Adriz1611/GreenRetrieval" target="_blank"
            >GitHub</a
          >
          ‚Ä¢ <a href="https://data.eppo.int" target="_blank">EPPO Database</a> ‚Ä¢
          <a href="https://console.groq.com" target="_blank">Groq AI</a>
        </p>
      </footer>
    </div>
  </body>
</html>
